(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,n){e.exports=n(43)},41:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),o=n(10),r=n.n(o),u=n(15),l=n(11),i=n(12),c=n(14),m=n(13),d=n(16),h=n(2),f=n.n(h),p="/api/persons",g={getAll:function(){return f.a.get(p)},create:function(e){return f.a.post(p,e)},remove:function(e){return f.a.delete("".concat(p,"/").concat(e))},update:function(e,t){return f.a.put("".concat(p,"/").concat(e),t).then(function(e){return e.data})}},v=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(m.a)(t).call(this,e))).addPerson=function(e){if(console.log("Adding new person"),e.preventDefault(),n.state.persons.map(function(e){return e.name}).indexOf(n.state.newName)>-1){if(console.log("Person exists"),window.confirm("Haluatko vaihtaa k\xe4ytt\xe4j\xe4n "+n.state.newName+" numeron?")){console.log("Changing number for "+n.state.newName);var t=n.state.persons.find(function(e){return e.name===n.state.newName}),a=Object(u.a)({},t,{number:n.state.newNumber});console.log(a),g.update(t.id,a).then(function(e){n.setState({persons:n.state.persons.map(function(e){return e.id!==t.id?e:a}),personsToShow:n.state.persons.map(function(e){return e.id!==t.id?e:a}),newName:"",newNumber:"",filter:"",successmessage:"K\xe4ytt\xe4j\xe4n "+n.state.newName+" numero vaihdettu!"}),setTimeout(function(){n.setState({successmessage:null})},5e3),n.render()}).catch(function(e){g.getAll().then(function(e){n.setState({persons:e.data,personsToShow:e.data}),alert("eip\xe4 l\xf6ytyny nimmee enn\xe4\xe4 palvelimelt, yrit\xe4p\xe4s uusiksi")})})}}else{var s={name:n.state.newName,number:n.state.newNumber};g.create(s).then(function(e){n.setState({persons:n.state.persons.concat(e.data),personsToShow:n.state.persons.concat(e.data),newName:"",newNumber:"",filter:"",successmessage:"K\xe4ytt\xe4j\xe4 "+n.state.newName+" lis\xe4tty palvelimelle."})}),setTimeout(function(){n.setState({successmessage:null})},5e3)}},n.removePerson=function(e){return function(){var t=n.state.persons.find(function(t){return t.id===e}).name;window.confirm("Haluatko poistaa k\xe4ytt\xe4j\xe4n "+n.state.persons.find(function(t){return t.id===e}).name+"?")&&(console.log("Removing person "+e),g.remove(e).then(function(e){g.getAll().then(function(e){n.setState({persons:e.data,personsToShow:e.data,successmessage:"K\xe4ytt\xe4j\xe4 "+t+" poistettu palvelimelta."}),console.log("Loaded data after removal")})}),setTimeout(function(){n.setState({successmessage:null})},5e3))}},n.handleNameChange=function(e){n.setState({newName:e.target.value})},n.handleNumberChange=function(e){n.setState({newNumber:e.target.value})},n.handleFilterChange=function(e){var t=n.state.persons.filter(function(t){return t.name.toLowerCase().includes(e.target.value.toLowerCase())});n.setState({filter:e.target.value,personsToShow:t})},n.state={persons:[],personsToShow:[],newName:"",newNumber:"",filter:"",successmessage:null},console.log("constructor"),n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;g.getAll().then(function(t){e.setState({persons:t.data,personsToShow:t.data})})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("h2",null,"Puhelinluettelo"),s.a.createElement(S,{message:this.state.successmessage}),s.a.createElement(w,{state:this.state,handleFilterChange:this.handleFilterChange}),s.a.createElement(N,{state:this.state,handleNameChange:this.handleNameChange,handleNumberChange:this.handleNumberChange,addPerson:this.addPerson}),s.a.createElement(b,{personsToShow:this.state.personsToShow,removePerson:this.removePerson}))}}]),t}(s.a.Component),w=function(e){return s.a.createElement("form",null,s.a.createElement("div",null,s.a.createElement("h2",null,"Rajaa luetteloa"),"Rajaus:",s.a.createElement("input",{value:e.state.filter,onChange:e.handleFilterChange})))},N=function(e){return s.a.createElement("div",null,s.a.createElement("h2",null,"Lis\xe4\xe4 uusi"),s.a.createElement("form",{onSubmit:e.addPerson},s.a.createElement("div",null,"Nimi:",s.a.createElement("input",{value:e.state.newName,onChange:e.handleNameChange})),s.a.createElement("div",null,"Numero:",s.a.createElement("input",{value:e.state.newNumber,onChange:e.handleNumberChange})),s.a.createElement("div",null,s.a.createElement("button",{type:"submit"},"Lis\xe4\xe4"))))},b=function(e){var t=e.personsToShow,n=e.removePerson;return s.a.createElement("div",null,s.a.createElement("h2",null,"Numerot"),t.map(function(e){return s.a.createElement(E,{key:e.id,person:e,removePerson:n(e.id)})}))},E=function(e){var t=e.person,n=e.removePerson;return s.a.createElement("p",null,t.name," ",t.number," ",s.a.createElement("button",{onClick:n},"Poista"))},S=function(e){var t=e.message;return null===t?null:s.a.createElement("div",{className:"successmessage"},t)},C=v;n(41);r.a.render(s.a.createElement(C,null),document.getElementById("root"))}},[[17,2,1]]]);
//# sourceMappingURL=main.f5115b7d.chunk.js.map